
<!--   
   Copyright (c) 2015.
 
   This file is part of Project Manager.
 
   Project Manager is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   Project Manager is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with Project Manager.  If not, see <http://www.gnu.org/licenses/>. -->

<h2>{{ 'RESET_PASSWD' | translate }}</h2>

	<div ng-if="!ctrl.user.project.id" class="row">
		<project-selector project="ctrl.user.project" callback="ctrl.loadProjectUsers(project)"></project-selector>
	</div>

	<div ng-if="ctrl.user.project.id" class="row">
		<div class="col-md-12">
			<h2> {{ ctrl.user.project.name }} </h2>
		</div>
		<div class="col-md-12 row">
            <div class="col-md-5">
                <div class="panel panel-default">
                    <div class="panel-heading">{{ 'USERS' | translate }}</div>
                    <ul class="list-group user-list">
                        <li ng-repeat="user in ctrl.projectUsers | orderBy:'userCredentials.username'"
                            class="list-group-item" ng-click="user.selected = !user.selected">
                            <input type="checkbox" ng-model="user.selected">
                            {{user.userCredentials.username}}
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-5">
                <form name="individualUpdate" ng-submit="ctrl.resetProjectPassword()">
                    <h3>{{ 'NEW_PASSWORD' | translate }}</h3>
                    <input name="password" type="text" class="form-control" ng-model="ctrl.password.new"
                           minlength="8" maxlength="35" contains-digit contains-uppercase contains-special required/>
                    <div><i>{{ 'NEW_PASSWORD_HINT' | translate }}</i></div>
                    <br/>
                    <div class="form_group">
                        <button type="submit" ng-disabled="individualUpdate.$invalid" class="btn btn-primary">
                            {{ 'RESET_BUTTON' | translate }}
                        </button>
                    </div>
                </form>
                <br/>
                <span ng-show="ctrl.progressbarDisplayed">
                    {{ctrl.resetPasswordResult.updated}} / {{ctrl.resetPasswordResult.total}}
                </span>
                <d2-progressbar-dynamic status="ctrl.individualProgressStatus"></d2-progressbar-dynamic>
            </div>
		</div>
	</div>

	<!--
	<div class="row">
	<div class="col-md-6">
		<label for="file_name"> {{ 'ROLE_1' | translate }} </label>
		<input type="text" class="form-control" name="role1" ng_model="role1"/>
	</div>
	</div>
	<br/>
	-->

	<!--
	<div class="row">
	<div class="col-md-6">
		<label for="file_name"> {{ 'ROLE_2' | translate }} </label>
		<input type="text" class="form-control" name="role2" ng_model="role2"/>
	</div>
	</div>
	<br/>
	<div class="row">
	<div class="col-md-6">
		<label for="file_name"> {{ 'ROLE_3' | translate }} </label>
		<input type="text" class="form-control" name="role3" ng_model="role3"/>
	</div>
	</div>
	<br/>
	<div class="row" ng-show="showresult">
	
		{{'MESSAGE_RESET' | translate}} {{countUsers}}
	
	</div>
	<br/>
	<d2-progressBar></d2-progressBar>
	<br/>
	<div class="form_group">	
		<button type="button" ng-click="resetpass()" class="btn btn-primary">{{ 'RESET_BUTTON' | translate }}</button>						
	</div>
	-->

