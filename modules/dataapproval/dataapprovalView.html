
<!--   
   Copyright (c) 2015.
 
   This file is part of Project Manager.
 
   Project Manager is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   Project Manager is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with Project Manager.  If not, see <http://www.gnu.org/licenses/>. -->

<d2-authorization menuoption="F_APPROVE_DATA"></d2-authorization>

<div class="row">
<div class="col-md-4">
	<h2>{{'DATA_APPROVAL' | translate}}</h2>
</div>
<div class="col-md-2">
<br>
	<button type="button" class="btn btn-default btn-xs" ng-model="collapsed" ng-click="collapsed=!collapsed">
	  <span>{{(collapsed!=true)?'APPROVAL_HIDE' :'APPROVAL_SHOW' | translate}}</span>
	</button>
 </div> 
  </div>
  <div class="row" ng-show="msjValidation!=1">
  		<div class="col-md-12">
			<d2-messages type="danger" textmessage="{{msjValidation}}"></d2-messages>
  		</div>
  </div>
  
  
<div class="row" ng-hide="collapsed">
	<div class="col-md-12">
		<d2-dropdowndataset></d2-dropdowndataset> 
		<d2-dropdownperiod></d2-dropdownperiod>
		<d2-treeorganisationunit treetype="single" size='200px'></d2-treeorganisationunit>
			
		<br>
		<div class="row">
			<div class="col-md-12">
				<button class="btn btn-primary" ng-click="executeoption(1)" type="submit">{{ 'DATA_APPROVAL_GET' | translate }}</button>
				<button class="btn btn-default" ng-click="Clearform()" type="submit">{{ 'DATA_APPROVAL_CANCEL' | translate }}</button>
			</div>
		</div>
		<br>
	</div>
</div>

<br>

<div class="row">
<div class="container col-md-10">
	<progressbar  ng-show="DatasetValue==undefined && progressbarDisplayed==true?true:false"  class="progress-striped active" value="100" type="info">{{ 'IN_PROGRESS' | translate }}</progressbar>
	<div class="row" ng-show="DatasetValue==undefined?false:true">
		 	<div class="alert alert-info" role="alert">{{ 'APPROVAL_STATE' | translate }} : {{Approval.state | translate}}
				<button class="btn btn-primary" ng-click="executeoption(2)"  type="submit" ng-show="Approval.mayApprove && !Approval.mayAccept && !Approval.mayUnaccept" >{{ 'DATA_APPROVAL_APPROVAL' | translate }}</button>
				<button class="btn btn-primary" ng-click="executeoption(3)" type="submit" ng-show="Approval.mayUnapprove" >{{ 'DATA_APPROVAL_UNAPPROVAL' | translate }}</button>
				<button class="btn btn-primary" ng-click="executeoption(4)" type="submit" ng-show="Approval.mayAccept" >{{ 'DATA_APPROVAL_ACCEPT' | translate }}</button>
				<button class="btn btn-primary" ng-click="executeoption(5)" type="submit" ng-show="Approval.mayUnaccept" >{{ 'DATA_APPROVAL_UNACCEPT' | translate }}</button>
			</div>
	</div>
<div class="row">
	<div class="col-md-12">
		<div id='viewform' class="table-responsive">
			<div ng-bind-html="DatasetValue | to_trusted"></div>
		</div>
	</div>
</div>
</div>
</div>
<d2-modaldialogbox></d2-modaldialogbox>
