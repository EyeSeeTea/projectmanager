
<!--   
   Copyright (c) 2015.
 
   This file is part of Project Manager.
 
   Project Manager is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   Project Manager is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with Project Manager.  If not, see <http://www.gnu.org/licenses/>. -->

<h2>{{ 'DATA_EXPORT' | translate }}</h2>

<form name="form" ng-submit="form.$valid && submit()" ng-controller="dataexportController" novalidate>

    <div class="row" ng-show="form.$submitted">
	  	<div class="col-md-12">
			<d2-messages type="danger" ng-show="form.file_name.$error.required" textmessage="{{ 'VALIDATION_FILE_NAME' | translate }}"></d2-messages>
			<d2-messages type="danger" ng-show="form.start_date.$error.required" textmessage="{{ 'VALIDATION_START_DATE' | translate }}"></d2-messages>
			<d2-messages type="danger" ng-show="form.end_date.$error.required" textmessage="{{ 'VALIDATION_END_DATE' | translate }}"></d2-messages>
		</div>
	</div>


	<div class="row">
	<div class="col-md-6">
		<label for="file_name"> {{ 'FILE_NAME' | translate }} </label>
		<div class="input-group">
		      <input id="file_name" type="text" class="form-control" ng-model="file_name" name="file_name" required=""/>
			 	<span class="input-group-addon">
		        	<label>{{ 'METADATA_EXPORT_ZIP' | translate }}</label> <input type="checkbox" ng-model="zipped" aria-label="...">
		      	</span>	
			 </div>
	</div>
	</div>
	<br/>
	<div class="row">
		<div class="col-md-3">
			<label for="start_date">{{'EXPORT_INIT_DATE' | translate}}</label>
			 <p class="input-group">
				<input id="start_date" name="start_date" type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy" ng-model="start_date"
					   ng-disabled="demographicsSelected" ng-required="!demographicsSelected" is-open="openedstart" min-date="minDate"
					   date-disabled="disabled(date, mode)" close-text="Close" />
				<span class="input-group-btn">
				  <button type="button" class="btn btn-default" ng-click="openstart($event)"><i class="glyphicon glyphicon-calendar"></i></button>
				</span>
			  </p>
		</div>
		<div class="col-md-3 right-border">
			<label for="end_date">{{'EXPORT_END_DATE' | translate}}</label>
			 <p class="input-group">
				<input id="end_date" name="end_date" type="text" class="form-control" uib-datepicker-popup="dd/MM/yyyy" ng-model="end_date"
					   ng-disabled="demographicsSelected" ng-required="!demographicsSelected" is-open="openedend" min-date="minDate"
					   date-disabled="disabled(date, mode)" close-text="Close" />
				<span class="input-group-btn">
				  <button type="button" class="btn btn-default" ng-click="openend($event)"><i class="glyphicon glyphicon-calendar"></i></button>
				</span>
			  </p>
		</div>
		<div class="col-md-3">
			<label for="demYear">
				<input id="demographics" type="checkbox" ng-model="demographicsSelected" aria-label="...">
				<label for="demographics">{{ 'DEMOGRAPHIC_DATA' | translate }}</label>
			</label>
			<select id="demYear" class="form-control" ng-model="demographicsYear" ng-disabled="!demographicsSelected"
					ng-options="year for year in availableYears">></select>
		</div>
	</div>
	<br/>
	<d2-treeorganisationunit  treetype="multiple" size='300px'></d2-treeorganisationunit>
	<br/>
	<div class="row">
		<div class="col-md-6">
			<d2-progressbar-dynamic status="dataExportStatus"></d2-progressbar-dynamic>
		</div>
	</div>
	<div class="form_group">
		<button type="submit" id="submit" class="btn btn-primary">{{ 'EXPORT' | translate }}</button>
	</div>
	
</form>